<!DOCTYPE html>
<html lang="{{ page.lang | default: "en" }}">
  {%- include head.html -%}
  <body a="{{ site.theme_config.appearance | default: "auto" }}">
    <video id="background" autoplay loop muted>
      <source src="{{ site.baseurl }}/assets/img/bg.mp4" type="video/mp4">
      Your browser does not support the video tag.
  </video>
    <main class="page-content" aria-label="Content">
      <div class="w", id="content">
        {{ content }}
      </div>
    </main>
    {%-if site.goat_counter and jekyll.environment == "production"-%}
      {%-include goat_counter.html-%}
    {%-endif-%}

    {% if page.custom_js %}
      {% for js_file in page.custom_js %}
        <script type="text/javascript" src="{{ site.baseurl }}/assets/js/{{ js_file }}.js"></script>
      {% endfor %}
    {% endif %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.3.0/color-thief.umd.js"></script>
    <script>
        const video = document.getElementById('background');
        const content = document.getElementById('w');
        const colorThief = new ColorThief();

        video.addEventListener('play', function() {
            setInterval(function() {
                const rgb = colorThief.getColor(video);
                const brightness = (rgb[0] * 299 + rgb[1] * 587 + rgb[2] * 114) / 1000;
                const textColor = brightness > 125 ? '#000000' : '#FFFFFF'; // Adjust threshold as needed
                content.style.color = textColor;
            }, 1000); // Adjust interval as needed
        });
    </script>
  </body>
</html>